{"title":"Posit Infrastructure at VI","markdown":{"yaml":{"title":"Posit Infrastructure at VI","author":"Trishang Udhwani","format":{"html":{"toc":true,"toc-location":"left","toc-depth":2,"number-sections":true,"number-depth":3}},"editor":"visual"},"headingText":"Posit Infrastructure","containsRefs":false,"markdown":"\n\n\n![](posit%20infrastructure%20at%20VI%20images/concept_map.jpeg){fig-align=\"center\"}\n\n## Posit Workbench\n\n-   Currently we have 2 nodes on Workbench.\n\n-   A (*compute*) **node** is a computer part of a larger set of nodes (a cluster). Besides compute nodes, a cluster comprises one or more *login* nodes, *file server* nodes, *management* nodes, etc. A compute node offers resources such as processors, volatile memory (RAM), permanent disk space (e.g. SSD), accelerators (e.g. GPU) etc.\n\n-   To run a \"long\" job on Workbench in parallel, you need three things:\n\n1.  Multiple **cores**\n\n2.  Large memory (RAM)\n\n3.  R scripts that have been parallelized.\n\n## Workbench Infrastructure\n\n![](posit%20infrastructure%20at%20VI%20images/workbench%20architecture.png){fig-align=\"center\"}\n\n## Background Jobs\n\nNext to your console window you will see background jobs and workbench jobs.\n\n![](posit%20infrastructure%20at%20VI%20images/pane_1.png){fig-align=\"center\"}\n\n> You can start a background job by clicking on **Start Background Job**\n\nThese jobs run in the background of your current session. As soon as you close the session, you abort the job.\n\n![](posit%20infrastructure%20at%20VI%20images/background_job.png){fig-align=\"center\"}\n\n## Workbench Jobs\n\n![](posit%20infrastructure%20at%20VI%20images/pane-2.png){fig-align=\"center\"}\n\n> You can start a background job by clicking on **Start Workbench Job**\n\nThese jobs are submitted to the cluster and will not abort when you close the session.\n\nThe jobs are scheduled through SLURM. When you ask for \"large\" memory, your job will automatically be submitted on the cn00.posit.vetinst.no node.\n\n::::: columns\n::: {.column width=\"50%\"}\n![](posit%20infrastructure%20at%20VI%20images/wb%20jobs.png)\n:::\n\n::: {.column width=\"50%\"}\n![](posit%20infrastructure%20at%20VI%20images/wb%20jobs%202.png)\n:::\n:::::\n\n## Workbench from Terminal\n\nYou can login to workbench from windows command line (CMD) using the folowing command and then your password\n\n```         \nssh YOUR_VI_NUMBER@workbench.posit.vetinst.no\n```\n\nSimilarly, you can login directly to the compute directly from CMD too\n\n```         \nssh YOUR_VI_NUMBER@cn00.posit.vetinst.no\n```\n\nWhen you login, you will end up in your HOME directory. Your `home` directory and everything within this directory will be the same on both nodes.\n\n## SLURM jobs from Terminal\n\nYou can schedule SLURM jobs from terminal. Here is a demo SLURM script\n\n```         \n#!/bin/bash  \n#SBATCH --job-name=give_any_jobname \n#SBATCH --output=output_file.out               # Standard output \n#SBATCH --error=error_file.err                 # Standard error \n#SBATCH --ntasks=1                             # Run a single task \n#SBATCH --cpus-per-task=16                     # Number of cores per task (modify based on your need)  \n\n# Execute the R script /home/vetinst.no/viXXXX/rest_of_the_path_of_your_script/script.R\n```\n\n::: callout-note\nThe `output_file.out` and `error_file.err` are two text files that will be generated when a SLURM script is run. These files will be generated in the same directory where you have saved your SLURM script file.\n:::\n\nYou also have to give read, write, and execute permissions to your R script. This can be done by adding\n\n```         \n#!/usr/local/bin/Rscript\n```\n\nAs the very first line of your R script. Then, in CMD navigate to the location of your R script and type (option 700 means you can do anything with the file or directory and other users have no access to it at all)\n\n```         \nchmod 700 your_script.R\n```\n\nThen you can run your SLURM script by navigating to the location where you have saved your SLURM script and typing:\n\n```         \nsbatch -w node_you_want_to_run_your_script name_of_slurm_script.slurm\n```\n\nAs all jobs on workbench now start through SLURM, you will get the `output_file.out` and `error_file.err` for every session in the `slurm_job_output` folder in your `home` folder.\n\n::: callout-important\nYou may want to enter another option `--mem-per-cpu` along with your sbatch command. Here, you provide the amount of RAM you need per CPU to run the task. The default is in MB but you can specify the amount in GB or TB as well (use letters M/G/T for MB, GB and TB respectively).\n\nFor example the above command can be modified to allocate 100GB to each CPU as follows:\n\n```         \nsbatch -w node_you_want_to_run_your_script --mem-per-cpu 100G name_of_slurm_script.slurm\n```\n:::\n","srcMarkdownNoYaml":"\n\n## Posit Infrastructure\n\n![](posit%20infrastructure%20at%20VI%20images/concept_map.jpeg){fig-align=\"center\"}\n\n## Posit Workbench\n\n-   Currently we have 2 nodes on Workbench.\n\n-   A (*compute*) **node** is a computer part of a larger set of nodes (a cluster). Besides compute nodes, a cluster comprises one or more *login* nodes, *file server* nodes, *management* nodes, etc. A compute node offers resources such as processors, volatile memory (RAM), permanent disk space (e.g. SSD), accelerators (e.g. GPU) etc.\n\n-   To run a \"long\" job on Workbench in parallel, you need three things:\n\n1.  Multiple **cores**\n\n2.  Large memory (RAM)\n\n3.  R scripts that have been parallelized.\n\n## Workbench Infrastructure\n\n![](posit%20infrastructure%20at%20VI%20images/workbench%20architecture.png){fig-align=\"center\"}\n\n## Background Jobs\n\nNext to your console window you will see background jobs and workbench jobs.\n\n![](posit%20infrastructure%20at%20VI%20images/pane_1.png){fig-align=\"center\"}\n\n> You can start a background job by clicking on **Start Background Job**\n\nThese jobs run in the background of your current session. As soon as you close the session, you abort the job.\n\n![](posit%20infrastructure%20at%20VI%20images/background_job.png){fig-align=\"center\"}\n\n## Workbench Jobs\n\n![](posit%20infrastructure%20at%20VI%20images/pane-2.png){fig-align=\"center\"}\n\n> You can start a background job by clicking on **Start Workbench Job**\n\nThese jobs are submitted to the cluster and will not abort when you close the session.\n\nThe jobs are scheduled through SLURM. When you ask for \"large\" memory, your job will automatically be submitted on the cn00.posit.vetinst.no node.\n\n::::: columns\n::: {.column width=\"50%\"}\n![](posit%20infrastructure%20at%20VI%20images/wb%20jobs.png)\n:::\n\n::: {.column width=\"50%\"}\n![](posit%20infrastructure%20at%20VI%20images/wb%20jobs%202.png)\n:::\n:::::\n\n## Workbench from Terminal\n\nYou can login to workbench from windows command line (CMD) using the folowing command and then your password\n\n```         \nssh YOUR_VI_NUMBER@workbench.posit.vetinst.no\n```\n\nSimilarly, you can login directly to the compute directly from CMD too\n\n```         \nssh YOUR_VI_NUMBER@cn00.posit.vetinst.no\n```\n\nWhen you login, you will end up in your HOME directory. Your `home` directory and everything within this directory will be the same on both nodes.\n\n## SLURM jobs from Terminal\n\nYou can schedule SLURM jobs from terminal. Here is a demo SLURM script\n\n```         \n#!/bin/bash  \n#SBATCH --job-name=give_any_jobname \n#SBATCH --output=output_file.out               # Standard output \n#SBATCH --error=error_file.err                 # Standard error \n#SBATCH --ntasks=1                             # Run a single task \n#SBATCH --cpus-per-task=16                     # Number of cores per task (modify based on your need)  \n\n# Execute the R script /home/vetinst.no/viXXXX/rest_of_the_path_of_your_script/script.R\n```\n\n::: callout-note\nThe `output_file.out` and `error_file.err` are two text files that will be generated when a SLURM script is run. These files will be generated in the same directory where you have saved your SLURM script file.\n:::\n\nYou also have to give read, write, and execute permissions to your R script. This can be done by adding\n\n```         \n#!/usr/local/bin/Rscript\n```\n\nAs the very first line of your R script. Then, in CMD navigate to the location of your R script and type (option 700 means you can do anything with the file or directory and other users have no access to it at all)\n\n```         \nchmod 700 your_script.R\n```\n\nThen you can run your SLURM script by navigating to the location where you have saved your SLURM script and typing:\n\n```         \nsbatch -w node_you_want_to_run_your_script name_of_slurm_script.slurm\n```\n\nAs all jobs on workbench now start through SLURM, you will get the `output_file.out` and `error_file.err` for every session in the `slurm_job_output` folder in your `home` folder.\n\n::: callout-important\nYou may want to enter another option `--mem-per-cpu` along with your sbatch command. Here, you provide the amount of RAM you need per CPU to run the task. The default is in MB but you can specify the amount in GB or TB as well (use letters M/G/T for MB, GB and TB respectively).\n\nFor example the above command can be modified to allocate 100GB to each CPU as follows:\n\n```         \nsbatch -w node_you_want_to_run_your_script --mem-per-cpu 100G name_of_slurm_script.slurm\n```\n:::\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"toc-depth":2,"number-sections":true,"output-file":"posit infrastructure at VI.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.57","editor":"visual","theme":"cosmo","title":"Posit Infrastructure at VI","author":"Trishang Udhwani","toc-location":"left","number-depth":3},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","output-file":"posit infrastructure at VI.pdf"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"block-headings":true,"editor":"visual","documentclass":"scrreprt","title":"Posit Infrastructure at VI","author":"Trishang Udhwani"},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","pdf"]}